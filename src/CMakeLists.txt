set(dirs 2d perf util interface services ftl_interop)

if (ENABLE_3D)
  list(APPEND dirs 3d)
endif()

if(ENABLE_MPI)
  list(APPEND dirs mpi)
endif()

foreach(dir ${dirs})
  add_subdirectory(${dir})
  foreach(dsrc ${${dir}_SOURCES})
    list(APPEND sources "src/${dir}/${dsrc}")
  endforeach(dsrc)
  foreach(dsrc ${${dir}_FTL_SOURCES})
    list(APPEND ftl_sources "src/${dir}/${dsrc}")
  endforeach(dsrc)
endforeach(dir)

set(cedar_src ${sources}
  src/kernel_params.cc
  src/config.cc
  src/multilevel_settings.cc
  src/malloc_pool.cc
  PARENT_SCOPE)

set(cedar_ftl_src ${ftl_sources} PARENT_SCOPE)
